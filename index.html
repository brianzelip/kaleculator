<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://npmcdn.com/basscss@7.1.1/css/basscss.min.css">
    <title>kaleculator</title>
    <style>
      * { box-sizing: border-box; }
      html,
      body,
      .vh100 { min-height: 100vh; }
      .h0,body,h1,h2,h3,h4,h5,h6 {
        font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;
      }
      .hide { display: none; }
      fieldset {
        border: 1px solid #111;
        border-radius: 4px;
        padding: 1rem;
      }
      .thin { font-weight: 300; }
      @media(min-width: 40em) {
        .sm-flex-row { flex-direction: row; }
        .sm-mt2 { margin-top: 1rem; }
        .sm-mb0 { margin-bottom: 0; }
      }
      .transparent { color: transparent; }
    </style>
  </head>

  <body class="bg-silver flex flex-column">

    <header class="px2 center">
      <h1 class="mt0 sm-mt2">Kaleculator</h1>
      <h2 class="mt2 thin">calculate the amount of kale to buy in pounds and grams</h2>
    </header>

    <main class="p2 flex-grow">

      <Kaleculator>
        <div class="p2 col-8 sm-col-12 md-col-10 lg-col-8 mx-auto border rounded">
          <div class="flex flex-center flex-column sm-flex-row">
            <select name="starting-point" id="starting-point" class="col-10 sm-col-6 mb1 sm-mb0">
              <option value="0" selected>0</option>
              <option value="1">1 batch</option>
              <option value="2">2 batches</option>
              <option value="3">3 batches</option>
              <option value="4">4 batches</option>
              <option value="5">5 batches</option>
              <option value="6">6 batches</option>
              <option value="7">7 batches</option>
              <option value="8">8 batches</option>
              <option value="9">9 batches</option>
              <option value="10">10 batches</option>
              <option value="11">11 batches</option>
              <option value="12">12 batches</option>
              <option value="13">13 batches</option>
              <option value="14">14 batches</option>
              <option value="15">15 batches</option>
            </select>

            <div class="col-12 sm-col-3 center">
              <span id="output-pounds" class="h1"></span><span class="unit transparent">lbs</span>
            </div>

            <div class="col-12 sm-col-3 center">
              <span id="output-grams" class="h1"></span><span class="unit transparent">g</span>
            </div>

          </div>
        </div>
      </Kaleculator>

    </main>

    <footer class="">
      <div class="col-6 sm-col-4 md-col-3 lg-col-2 mx-auto">
        <a href="http://outliersnacks.com">
          <img src="OSlogo.png" alt="Outlier Snacks logo" title="Outlier Snacks logo">
        </a>
      </div>
    </footer>

    <script>
      const userInput = document.getElementById('starting-point');
      const outputGrams = document.getElementById('output-grams');
      const outputPounds = document.getElementById('output-pounds');
      const units = document.querySelectorAll('.unit');
      
      const k = 1125;
      const getGrams = (constant, input) =>
        `${
          Number(constant * input).toLocaleString()
        }`;
      const getPounds = (constant, input) =>
        `${
          (((constant * input) / 454).toFixed(1).endsWith('0'))
            ? `${((constant * input) / 454).toFixed(0)}`
            : `${((constant * input) / 454).toFixed(1)}`
        }`;

      userInput.addEventListener('change', (e) => {
        units.forEach( (unit) => unit.classList.remove('transparent') );
        outputGrams.innerHTML = getGrams(k, userInput.value);
        outputPounds.innerHTML = getPounds(k, userInput.value);
      }, false)
    </script>

  </body>

</html>